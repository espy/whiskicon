(function(){var e={};var t=null;var n=null;var r=null;var i=null;var s=null;var o={};var u={background:"#F3F68D",ring:"#FFF",percentage:"#3C3D40",icons:"#3C3D40",thickness:1,fallback:false};var a=function(){var e=navigator.userAgent.toLowerCase();return function(t){return e.indexOf(t)!==-1}}();var f={ie:a("msie"),chrome:a("chrome"),webkit:a("chrome")||a("safari"),safari:a("safari")&&!a("chrome"),mozilla:a("mozilla")&&!a("chrome")&&!a("safari")};var l=function(){var e=document.getElementsByTagName("link");for(var t=0,n=e.length;t<n;t++){if(e[t].getAttribute("rel")==="icon"||e[t].getAttribute("rel")==="shortcut icon"){return e[t]}}return false};var c=function(){var e=document.getElementsByTagName("link");var t=document.getElementsByTagName("head")[0];for(var n=0,r=e.length;n<r;n++){if(e[n].getAttribute("rel")==="icon"||e[n].getAttribute("rel")==="shortcut icon"){t.removeChild(e[n])}}};var h=function(e){c();var t=document.createElement("link");t.type="image/x-icon";t.rel="icon";t.href=e;document.getElementsByTagName("head")[0].appendChild(t)};var p=function(){if(!s){s=document.createElement("canvas");s.width=16;s.height=16}return s};var d=function(e){var r=p();var i=r.getContext("2d");var e=e||0;var s=n;var u=new Image;u.onload=function(){if(i){i.clearRect(0,0,16,16);i.beginPath();i.moveTo(r.width/2,r.height/2);i.arc(r.width/2,r.height/2,Math.min(r.width/2,r.height/2),0,Math.PI*2,false);i.fillStyle=o.ring;i.fill();if(e>0){i.beginPath();i.moveTo(r.width/2,r.height/2);i.arc(r.width/2,r.height/2,Math.min(r.width/2,r.height/2),-.5*Math.PI,(-.5+2*e/100)*Math.PI,false);i.fillStyle=o.percentage;i.fill()}i.beginPath();i.moveTo(r.width/2,r.height/2);i.arc(r.width/2,r.height/2,Math.min(r.width/2,r.height/2)-o.thickness,0,Math.PI*2,false);i.fillStyle=o.background;i.fill();if(t=="play"){var n=7;var s=n*(Math.sqrt(3)/2);i.strokeStyle=o.icons;i.fillStyle=o.icons;i.save();i.translate(7,7);i.rotate(-.5);i.beginPath();i.moveTo(0,-s/2);i.lineTo(-n/2,s/2);i.lineTo(n/2,s/2);i.lineTo(0,-s/2);i.stroke();i.fill();i.restore()}if(t=="pause"){i.save();i.translate(5,4);i.beginPath();i.fillStyle=o.icons;i.fillRect(0,0,2,8);i.fillRect(4,0,2,8);i.restore()}h(r.toDataURL())}};if(!s.match(/^data/)){u.crossOrigin="anonymous"}u.src=s};var v=function(e){if(e>0){document.title="("+e+"%) "+i}else{document.title=i}};e.setOptions=function(e){o={};for(var t in u){o[t]=e.hasOwnProperty(t)?e[t]:u[t]}return this};e.setState=function(e){t=e;return this};e.getState=function(){return t};e.setProgress=function(e){if(!i){i=document.title}if(!r||!n){var t=l();r=n=t?t.getAttribute("href"):"/favicon.ico"}if(!isNaN(parseFloat(e))&&isFinite(e)){if(!p().getContext||f.ie||f.safari||o.fallback==true){return v(e)}else if(o.fallback==="force"){v(e)}return d(e)}return false};e.reset=function(){if(i){document.title=i}if(r){n=r;h(n)}};e.setOptions(u);window.Whiskicon=e})()